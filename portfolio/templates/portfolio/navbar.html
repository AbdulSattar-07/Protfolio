{% load static %}
<nav id="navbar"
    class="fixed w-full top-0 z-50 transition-all duration-500 backdrop-blur-md bg-black/30 border-b border-gray-800/30">
    <div class="max-w-7xl mx-auto px-6 md:px-10 py-3 flex items-center justify-between">

        <!-- Logo -->
        <div class="flex items-center gap-3">
            <a href="{% url 'portfolio:home' %}" class="flex items-center gap-3 group">
                <div class="relative">
                    {% if profile and profile.avatar %}
                    <img src="{{ profile.avatar.url }}"
                        alt="{% if profile.name %}{{ profile.name }}{% else %}{{ site_settings.site_name }}{% endif %}"
                        class="w-10 h-10 rounded-full object-cover border-2 border-indigo-500 group-hover:border-purple-500 transition-all duration-300 shadow-lg">
                    {% else %}
                    <img src="{% static 'images/default-profile.png' %}"
                        alt="{% if profile and profile.name %}{{ profile.name }}{% else %}{{ site_settings.site_name }}{% endif %}"
                        class="w-10 h-10 rounded-full object-cover border-2 border-indigo-500 group-hover:border-purple-500 transition-all duration-300 shadow-lg">
                    {% endif %}
                </div>
                <div class="flex flex-col">
                    <span class="text-xl font-bold text-white group-hover:text-indigo-400 transition-colors">
                        {% if profile and profile.name %}{{ profile.name }}{% else %}{{ site_settings.site_name }}{% endif %}
                    </span>
                    {% if profile and profile.title %}
                    <span class="text-xs text-gray-400 -mt-1">{{ profile.title }}</span>
                    {% endif %}
                </div>
            </a>
        </div>

        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-1">
            <a href="{% url 'portfolio:home' %}"
                class="nav-link flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'home' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="home" class="w-4 h-4"></i>
                Home
            </a>
            <a href="{% url 'portfolio:about' %}"
                class="nav-link flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'about' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="user" class="w-4 h-4"></i>
                About
            </a>
            <a href="{% url 'portfolio:projects' %}"
                class="nav-link flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'projects' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="folder" class="w-4 h-4"></i>
                Projects
            </a>
            <a href="{% url 'portfolio:contact' %}"
                class="nav-link flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'contact' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="mail" class="w-4 h-4"></i>
                Contact
            </a>
            <a href="{% url 'portfolio:resume' %}"
                class="nav-link flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'resume' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="cpu" class="w-4 h-4"></i>
                Resume
            </a>

            <!-- Theme toggle (desktop) -->
            <button id="theme-toggle"
                class="ml-2 flex items-center justify-center w-9 h-9 rounded-xl border border-gray-700/70 bg-gray-900/40 text-gray-300 hover:text-yellow-300 hover:border-yellow-400 transition-all duration-300"
                aria-label="Toggle dark mode">
                <i data-lucide="moon" class="w-4 h-4 theme-icon-dark"></i>
                <i data-lucide="sun" class="w-4 h-4 theme-icon-light hidden"></i>
            </button>
        </div>

        <!-- Mobile Menu Button + Theme -->
        <div class="flex items-center gap-2 md:hidden">
            <button id="theme-toggle-mobile"
                class="flex items-center justify-center w-9 h-9 rounded-xl border border-gray-700/70 bg-gray-900/40 text-gray-300 hover:text-yellow-300 hover:border-yellow-400 transition-all duration-300"
                aria-label="Toggle dark mode">
                <i data-lucide="moon" class="w-4 h-4 theme-icon-dark"></i>
                <i data-lucide="sun" class="w-4 h-4 theme-icon-light hidden"></i>
            </button>
            <button id="mobile-menu-btn"
                class="p-2 text-gray-300 hover:text-white hover:bg-gray-800/50 rounded-xl transition-all duration-300">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden backdrop-blur-2xl bg-black/95 border-t border-gray-800/50">
        <div class="flex flex-col py-4 space-y-2 px-6">
            <a href="{% url 'portfolio:home' %}"
                class="flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'home' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="home" class="w-5 h-5"></i>
                Home
            </a>
            <a href="{% url 'portfolio:about' %}"
                class="flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'about' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="user" class="w-5 h-5"></i>
                About
            </a>
            <a href="{% url 'portfolio:projects' %}"
                class="flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'projects' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="folder" class="w-5 h-5"></i>
                Projects
            </a>
            <a href="{% url 'portfolio:contact' %}"
                class="flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'contact' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="mail" class="w-5 h-5"></i>
                Contact
            </a>
            <a href="{% url 'portfolio:resume' %}"
                class="flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-300 {% if request.resolver_match.url_name == 'resume' %}text-white bg-gradient-to-r from-indigo-500 to-purple-600 shadow-lg{% else %}text-gray-300 hover:text-white hover:bg-gray-800/50{% endif %}">
                <i data-lucide="cpu" class="w-5 h-5"></i>
                Resume
            </a>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="h-1 bg-gradient-to-r from-indigo-500 to-purple-600"></div>
</nav>